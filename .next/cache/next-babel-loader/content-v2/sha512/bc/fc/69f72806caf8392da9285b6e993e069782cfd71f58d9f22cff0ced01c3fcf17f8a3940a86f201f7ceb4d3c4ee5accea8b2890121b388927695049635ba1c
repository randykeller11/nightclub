{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/dub_ceo/Desktop/spacesvr-starter/src/ideas/Builder12/layers/communication/visual/VisualDialogue/components/Bubbles.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { useMemo, useRef } from \"react\";\nimport { Floating, Spinning, useLimiter } from \"spacesvr\";\nimport { Idea, VisualIdea } from \"../../../../basis\";\nimport { animated, useSpring } from \"react-spring/three\";\nimport { useFrame } from \"@react-three/fiber\";\n\nfunction Bubble(props) {\n  const {\n    i,\n    num,\n    enabled,\n    pos,\n    size,\n    idea\n  } = props;\n  const {\n    scale\n  } = useSpring({\n    scale: enabled ? 1 : 0\n  });\n  return /*#__PURE__*/_jsxDEV(\"group\", {\n    name: `bubble-${i}`,\n    position: pos,\n    children: /*#__PURE__*/_jsxDEV(Floating, {\n      height: size * 0.25,\n      children: /*#__PURE__*/_jsxDEV(Spinning, {\n        xSpeed: 0.1,\n        ySpeed: 0.1,\n        zSpeed: 0.1,\n        children: /*#__PURE__*/_jsxDEV(animated.group, {\n          scale: scale,\n          children: /*#__PURE__*/_jsxDEV(VisualIdea, {\n            idea: idea,\n            size: size\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 5\n  }, this);\n}\n\nexport default function Bubbles(props) {\n  const {\n    numStops,\n    idea,\n    enabled,\n    anchorPos\n  } = props,\n        rest = _objectWithoutProperties(props, [\"numStops\", \"idea\", \"enabled\", \"anchorPos\"]);\n\n  const source = [0, 0, 0];\n  const group = useRef();\n  const limiter = useLimiter(50);\n  const bubbles = useMemo(() => {\n    const arr = [];\n\n    for (let i = 0; i < numStops; i++) {\n      const perc = i / (numStops - 1);\n      arr.push({\n        idea: new Idea().setFromCreation(idea.mediation, idea.specificity * perc, idea.utility * perc),\n        size: 0.01 + perc * 0.05,\n        pos: [source[0] * (1 - perc), source[1] * (1 - perc), source[2] * (1 - perc)]\n      });\n    }\n\n    return arr;\n  }, [numStops, source]);\n  useFrame(({\n    clock\n  }) => {\n    if (!group.current || !limiter.isReady(clock)) return;\n\n    for (let i = 0; i < numStops; i++) {\n      const perc = i / (numStops - 1);\n      const child = group.current.children[i];\n      child.position.copy(anchorPos).multiplyScalar(perc);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"group\", _objectSpread(_objectSpread({\n    name: \"bubbles\"\n  }, rest), {}, {\n    ref: group,\n    children: bubbles.map((bubble, i) => /*#__PURE__*/_jsxDEV(Bubble, _objectSpread({\n      i: i,\n      num: bubbles.length,\n      enabled: enabled\n    }, bubble), i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this))\n  }), void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/Users/dub_ceo/Desktop/spacesvr-starter/src/ideas/Builder12/layers/communication/visual/VisualDialogue/components/Bubbles.tsx"],"names":["useMemo","useRef","Floating","Spinning","useLimiter","Idea","VisualIdea","animated","useSpring","useFrame","Bubble","props","i","num","enabled","pos","size","idea","scale","Bubbles","numStops","anchorPos","rest","source","group","limiter","bubbles","arr","perc","push","setFromCreation","mediation","specificity","utility","clock","current","isReady","child","children","position","copy","multiplyScalar","map","bubble","length"],"mappings":"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","sourcesContent":["import { useMemo, useRef } from \"react\";\nimport { Floating, Spinning, useLimiter } from \"spacesvr\";\nimport { Idea, VisualIdea } from \"../../../../basis\";\nimport { animated, useSpring } from \"react-spring/three\";\nimport { GroupProps, useFrame } from \"@react-three/fiber\";\nimport { Group, Vector3 } from \"three\";\n\ntype Bubble = {\n  idea: Idea;\n  size: number;\n  pos: [number, number, number];\n};\n\ntype BubbleProps = {\n  i: number;\n  num: number;\n  enabled: boolean;\n} & Bubble;\n\nfunction Bubble(props: BubbleProps) {\n  const { i, num, enabled, pos, size, idea } = props;\n\n  const { scale } = useSpring({ scale: enabled ? 1 : 0 });\n\n  return (\n    <group name={`bubble-${i}`} position={pos}>\n      <Floating height={size * 0.25}>\n        <Spinning xSpeed={0.1} ySpeed={0.1} zSpeed={0.1}>\n          <animated.group scale={scale}>\n            <VisualIdea idea={idea} size={size} />\n          </animated.group>\n        </Spinning>\n      </Floating>\n    </group>\n  );\n}\n\ntype BubblesProps = {\n  numStops: number;\n  idea: Idea;\n  enabled: boolean;\n  anchorPos: Vector3;\n} & GroupProps;\n\nexport default function Bubbles(props: BubblesProps) {\n  const { numStops, idea, enabled, anchorPos, ...rest } = props;\n\n  const source = [0, 0, 0];\n  const group = useRef<Group>();\n  const limiter = useLimiter(50);\n\n  const bubbles: Bubble[] = useMemo(() => {\n    const arr: Bubble[] = [];\n    for (let i = 0; i < numStops; i++) {\n      const perc = i / (numStops - 1);\n      arr.push({\n        idea: new Idea().setFromCreation(\n          idea.mediation,\n          idea.specificity * perc,\n          idea.utility * perc\n        ),\n        size: 0.01 + perc * 0.05,\n        pos: [\n          source[0] * (1 - perc),\n          source[1] * (1 - perc),\n          source[2] * (1 - perc),\n        ],\n      });\n    }\n    return arr;\n  }, [numStops, source]);\n\n  useFrame(({ clock }) => {\n    if (!group.current || !limiter.isReady(clock)) return;\n\n    for (let i = 0; i < numStops; i++) {\n      const perc = i / (numStops - 1);\n      const child = group.current.children[i];\n      child.position.copy(anchorPos).multiplyScalar(perc);\n    }\n  });\n\n  return (\n    <group name=\"bubbles\" {...rest} ref={group}>\n      {bubbles.map((bubble, i) => (\n        <Bubble\n          key={i}\n          i={i}\n          num={bubbles.length}\n          enabled={enabled}\n          {...bubble}\n        />\n      ))}\n    </group>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}